<body>
  <style>
      #forum * {
          padding: 0px;
          margin: 0px;
      }

      #forum {
          position: relative;
          border: 5px solid dimgrey;
          border-radius: 5px;
          height: 300px;
          width: 300px;
          background-color: gray;
      }

      #forum .container {
          width: 300px;
          height: 250px;
          position: absolute;
          bottom: 0;
      }

      #forum #home.container {
      }

      #forum #question-view.container {
          margin: 0px;
          width: 300px;
          padding: 0px;
          overflow: initial;
      }
      #forum #ask-question.container {
          background-color: lightgrey;
          padding: 5px;
          width: 290px;
          overflow: auto;
      }

      #forum #question-view.container #actualQuestion {
          overflow: auto;
          height: 215px;
          text-align: left;
      }

      #forum #home.container #questionList {
          overflow: auto;
          height: 215px;
      }

      #forum #home #itemList {
          list-style-type: none;
      }

      #forum li {
          margin: 5px;
          margin-top: 0;
          padding: 5px;
          background-color: lightgrey;
          border-radius: 2px;
      }
      #forum li#question {
          background-color: lightblue;
      }

      #forum .top-button {
          margin: 5px;
          border-radius: 4px;
          padding: 3px;
      }

      #forum #ask-question.container #ask-question-body textarea {
          margin-top:5px;
          resize: vertical;
          margin-left: 5px;
      }

      #forum #ask-question.container #ask-question-body input {
          margin-left: 5px;
          margin-right: 0;
          padding: 0;
          width: 225px;
      }

      #forum #ask-question.container #ask-question-body button {
          padding: 5px;
          margin-top: 5px;
          margin-left: 109px;
          float:left;
      }
      #forum #ask-question.container #ask-question-body button#second {
          margin-left: 10px;
      }
  </style>

  <script>

      // Using '__SPNS__' as a variable prefix / postfix results in the 'Web Content Manager
      // ScriptPortletNamespace plug-in' on WebShere automatically replacing in with a portlet
      // specific namespace, allowing for the variable names in each portlet to not interfere
      var forumPortletCacheData;
      var FORUM_PORTLET_CACHE_LOCATION = "forum-portlet-cache-testing";
      var HOME = "home";
      var QUESTION_VIEW = "question-view";
      var ASK_QUESTION = "ask-question";

      function loadData() {
          forumPortletCacheData = localStorage.getItem(FORUM_PORTLET_CACHE_LOCATION);
          if(forumPortletCacheData) {
              forumPortletCacheData = JSON.parse(forumPortletCacheData);
          } else {
              forumPortletCacheData = {"questions":[]};
          }
          loadHomePanel();
          switchPanel(HOME);
      }

      /**
       * Loads up the main panel with all of the currently active questions
       */
      function loadHomePanel() {
          var array = forumPortletCacheData.questions;
          for(var i = 0; i < array.length; i ++) {
              var li = document.createElement("LI");
              var header = document.createElement("H4");
              var content = document.createElement("P");

              var textNode = document.createTextNode(array[i].text);
              content.appendChild(textNode);

              textNode = document.createTextNode(array[i].title);
              header.appendChild(textNode);

              li.appendChild(header);
              li.appendChild(content);
              li.setAttribute("class", "item");
              li.setAttribute("id", "questionNumber"+i);
              li.setAttribute("index", i+"");
              li.setAttribute("oncontextmenu", "removeQuestion(this)")

              var list = document.getElementById("itemList");
              list.appendChild(li);
          }
      }

      /**
       * Adds the data to the local questions array and saves the
       * data to the cache using 'JSON.stringify()'
       */
      function writeToCache(title, text) {
          forumPortletCacheData.questions[forumPortletCacheData.questions.length] = {"title":title, "text":text, "responses":[]};
          saveCurrentState();
      }

      function deleteFromCache(index) {
          forumPortletCacheData.questions.splice(index, 1);
          saveCurrentState();
      }

      function saveCurrentState() {
          localStorage.setItem(FORUM_PORTLET_CACHE_LOCATION, JSON.stringify(forumPortletCacheData));
      }

      /**
       * Loads the question and associated details into the 'question-view' panel
       */
      function addToList(title, text) {
          var li = document.createElement("LI");
          var header = document.createElement("H3");
          var content = document.createElement("P");

          var textNode = document.createTextNode(text);
          content.appendChild(textNode);

          textNode = document.createTextNode(title);
          header.appendChild(textNode);

          li.appendChild(header);
          li.appendChild(content);
          li.setAttribute("class", "item");
          li.setAttribute("index", forumPortletCacheData.questions.length+"");
          li.setAttribute("id", "questionNumber" + forumPortletCacheData.questions.length);

          var list = document.getElementById("itemList");
          list.appendChild(li);
          writeToCache(title, text);
      }

      function showAnswerQuestionForm() {
          return;
      }

      function showAskQuestionForm() {
          switchPanel(ASK_QUESTION);
      }

      /**
       * *** Called from the 'Post question' button ***
       * Verifies the question input data and adds in the storage if requirements are met
       * Forces the question to have a title, but only gives warning if body is missing
       */
      function postQuestion() {
          var title = document.getElementById("question-title").value;
          var text = document.getElementById("question-text").value;
          title = title.trim();
          text = text.trim();

          if(title === "" || title === null) {
              alert("Enter a question title!");
              return;
          } else if (text === "" || text === null) {
              var verify = confirm("You are asking a question " +
                      "without any text in the body, are you sure you want to proceed?");
              if(verify != true) {
                  return;
              }
          }

          addToList(title, text);
          switchPanel(QUESTION_VIEW);
          loadQuestion(forumPortletCacheData.questions.length - 1);
      }

      function removeQuestion(li) {
          deleteFromCache(li.getAttribute(""));
          li.remove();
      }

      /**
       * Loads an individual question onto the display
       * @param num integer index in the 'questions' array where the
       *    question is stored
       */
      function loadQuestion(num) {
          var arrayData = forumPortletCacheData.questions[num];
          var list = document.getElementById("responses");
          while(list.firstChild) {
              list.removeChild(list.firstChild);
          }

          var li = document.createElement("LI");
          var header = document.createElement("H3");
          var content = document.createElement("P");

          var text = document.createTextNode(arrayData.title);
          header.appendChild(text);

          text = document.createTextNode(arrayData.text);
          content.appendChild(text);

          li.appendChild(header);
          li.appendChild(content);
          li.setAttribute("class", "item");
          li.setAttribute("id", "actual-question");

          list.appendChild(li);

          for(var i = 0; i < arrayData.responses.length; i++) {
              li = document.createElement("LI");
              content = document.createElement("P");

              text = document.createTextNode(arrayData.responses[i].text);
              content.appendChild(text);

              li.appendChild(content);
              li.setAttribute("class", "item");
              li.setAttribute("id", "question"+num+"Response"+i);

              list.appendChild(li);
          }
      }

      function switchPanel(panelName) {
          var panel = document.getElementById(panelName);
          panel.style.display = "block";

          switch(panelName) {
              case HOME:
                  document.getElementById(QUESTION_VIEW).style.display = "none";
                  document.getElementById(ASK_QUESTION).style.display = "none";
                  break;
              case QUESTION_VIEW:
                  document.getElementById(HOME).style.display = "none";
                  document.getElementById(ASK_QUESTION).style.display = "none";
                  break;
              case ASK_QUESTION:
                  document.getElementById(QUESTION_VIEW).style.display = "none";
                  document.getElementById(HOME).style.display = "none";
                  break;
          }
      }

      window.onload = loadData;
  </script>

  <div id="forum">
      <div id="home" class="container">
          <button class="top-button" onclick="showAskQuestionForm()">Ask a question</button>
          <div id="questionList">
              <ul id="itemList">
                  <li class="item" onclick="" oncontextmenu="removeQuestion(this)">Test1</li>
              </ul>
          </div>
      </div>
      <div id="question-view" class="container">
          <button class="top-button" onclick="showAnswerQuestionForm()">Answer question</button>
          <div id="actualQuestion">
              <ul id="responses">
                  <li id="question"><h4>Question?</h4>
                      <p id="questionText">
                          Question text here.
                      </p>
                  </li>
                  <li class="item">Response1</li>
              </ul>
          </div>
      </div>
      <div id="ask-question" class="container">
          <div id="ask-question-body">
              <span style="margin-left: 5px">Title: </span>
              <input type="text" id="question-title">
              <br>
              <span style="display: block; margin-top: 5px; margin-left: 5px">Description: </span>
              <textarea rows="11" cols="36" type="text" id="question-text"></textarea>
              <button>Preview</button><button id="second" onclick="postQuestion()">Post question</button>
          </div>
      </div>
  </div>
</body>