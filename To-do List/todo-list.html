<body>
	<style>
		.box-design {
			border: 5px outset gray;
			padding: 5px;
			height: 95%;
			width: 95%;
			margin: 0px;
		}
		#ulList {
			list-style-image: url('http://i1067.photobucket.com/albums/u432/Bimde/Unchecked%20Box_zps8h2s0kkh.png');
		}
	</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	<div class = "box-design">
		<input id = "input" type= "text" placeholder="Remember to do something">
		<button onclick="addToList()">Add to list</button>
		<ul id="ulList"></ul>
	</div>
	
	<script>
		const TODO_LIST_CACHE_NAME = 'list-storage-myPortal';

		function addElement(text, num) {
			if (text.trim() != "") {
				var textNode = document.createTextNode(text);
				var li = document.createElement("LI");
				li.appendChild(textNode);
				document.getElementById("ulList").appendChild(li);
				li.setAttribute("index", (num+""));
			}
		}

		function addToList() {
			var text = document.getElementById("input").value;
			document.getElementById("input").value = null;
			if (text.trim() != "") {
				var textNode = document.createTextNode(text);
				var li = document.createElement("LI");
				li.appendChild(textNode);
				document.getElementById("ulList").appendChild(li);
				if(localStorage.getItem(TODO_LIST_CACHE_NAME) !== null) {
					var temp = JSON.parse(localStorage[TODO_LIST_CACHE_NAME]);
					temp.myData.splice(temp.myData.length, 0, text);
					localStorage.setItem(TODO_LIST_CACHE_NAME, JSON.stringify(temp));
					li.setAttribute("index", ((temp.myData.length-1)+""));
				}
				else {
					var data = {"myData":[text]};
					localStorage.setItem(TODO_LIST_CACHE_NAME, JSON.stringify(data));
				}
			}
			console.log(JSON.parse(localStorage.getItem(TODO_LIST_CACHE_NAME)));
		}

		function removeFromList(index) {
			var obj = JSON.parse(localStorage[TODO_LIST_CACHE_NAME]);
			obj.myData.splice(index, 1);
			localStorage.setItem(TODO_LIST_CACHE_NAME, JSON.stringify(obj));
		}

		function loadData() {
			if(localStorage.getItem(TODO_LIST_CACHE_NAME) !== null){
				var obj = JSON.parse(localStorage.getItem(TODO_LIST_CACHE_NAME));
				for(var i = 0; i < obj.myData.length; i++) {
					addElement(obj.myData[i], i);
				}
			}
		}

		$("#ulList").on('click', 'li', function() {
			var temp = $(this).attr("index");
			removeFromList(temp);
			$(this).remove();
		});

        $("#input").keydown(function(event){
            if(event.which === 13) {
                addToList();
            }
        })

		onload = loadData;
	</script>
</body>